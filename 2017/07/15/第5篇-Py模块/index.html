<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="python," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="模块，用一砣代码实现了某个功能的代码集合。 
类似于函数式编程和面向过程编程，函数式编程则完成一个功能，其他代码用来调用即可，提供了代码的重用性和代码间的耦合。而对于一个复杂的功能来，可能需要多个函数才能完成（函数又可以在不同的.py文件中），n个 .py 文件组成的代码集合就称为模块。
如：os 是系统相关的模块；file是文件操作相关的模块
模块分为三种：
自定义模块第三方模块内置模块
自定义">
<meta property="og:type" content="article">
<meta property="og:title" content="第5篇-Py模块">
<meta property="og:url" content="http://yoursite.com/2017/07/15/第5篇-Py模块/index.html">
<meta property="og:site_name" content="Yaro's Notes">
<meta property="og:description" content="模块，用一砣代码实现了某个功能的代码集合。 
类似于函数式编程和面向过程编程，函数式编程则完成一个功能，其他代码用来调用即可，提供了代码的重用性和代码间的耦合。而对于一个复杂的功能来，可能需要多个函数才能完成（函数又可以在不同的.py文件中），n个 .py 文件组成的代码集合就称为模块。
如：os 是系统相关的模块；file是文件操作相关的模块
模块分为三种：
自定义模块第三方模块内置模块
自定义">
<meta property="og:image" content="https://i.loli.net/2017/07/14/5968086a36b7a.png">
<meta property="og:image" content="https://i.loli.net/2017/07/14/596808a09535b.png">
<meta property="og:image" content="https://i.loli.net/2017/07/14/596808ad82a32.png">
<meta property="og:image" content="https://i.loli.net/2017/07/14/59680fae6dcae.png">
<meta property="og:image" content="https://i.loli.net/2017/07/14/596817a40dc51.png">
<meta property="og:updated_time" content="2017-07-15T15:35:33.183Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第5篇-Py模块">
<meta name="twitter:description" content="模块，用一砣代码实现了某个功能的代码集合。 
类似于函数式编程和面向过程编程，函数式编程则完成一个功能，其他代码用来调用即可，提供了代码的重用性和代码间的耦合。而对于一个复杂的功能来，可能需要多个函数才能完成（函数又可以在不同的.py文件中），n个 .py 文件组成的代码集合就称为模块。
如：os 是系统相关的模块；file是文件操作相关的模块
模块分为三种：
自定义模块第三方模块内置模块
自定义">
<meta name="twitter:image" content="https://i.loli.net/2017/07/14/5968086a36b7a.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/07/15/第5篇-Py模块/"/>





  <title> 第5篇-Py模块 | Yaro's Notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Yaro's Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">记录/备忘/练手</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/15/第5篇-Py模块/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Yaro">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://7u2o1q.com1.z0.glb.clouddn.com/Yaro%E5%A4%B4%E5%83%8F1.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Yaro's Notes">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Yaro's Notes" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                第5篇-Py模块
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-15T15:10:47+08:00">
                2017-07-15
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/07/15/第5篇-Py模块/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/07/15/第5篇-Py模块/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>模块，用一砣代码实现了某个功能的代码集合。 </p>
<p>类似于函数式编程和面向过程编程，函数式编程则完成一个功能，其他代码用来调用即可，提供了代码的重用性和代码间的耦合。而对于一个复杂的功能来，可能需要多个函数才能完成（函数又可以在不同的.py文件中），n个 .py 文件组成的代码集合就称为模块。</p>
<p>如：os 是系统相关的模块；file是文件操作相关的模块</p>
<p>模块分为三种：</p>
<p>自定义模块<br>第三方模块<br>内置模块</p>
<h3 id="自定义模块"><a href="#自定义模块" class="headerlink" title="自定义模块"></a>自定义模块</h3><h4 id="1、定义模块"><a href="#1、定义模块" class="headerlink" title="1、定义模块"></a>1、定义模块</h4><p>情景一：</p>
<p><img src="https://i.loli.net/2017/07/14/5968086a36b7a.png" width="400px"></p>
<a id="more"></a>
<p>情景二：</p>
<p><img src="https://i.loli.net/2017/07/14/596808a09535b.png" width="400px"></p>
<p>情景三：</p>
<p><img src="https://i.loli.net/2017/07/14/596808ad82a32.png" width="400px"></p>
<h4 id="2、导入模块"><a href="#2、导入模块" class="headerlink" title="2、导入模块"></a>2、导入模块</h4><p>Python之所以应用越来越广泛，在一定程度上也依赖于其为程序员提供了大量的模块以供使用，如果想要使用模块，则需要导入。导入模块有一下几种方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> module</div><div class="line"><span class="keyword">from</span> module.xx.xx <span class="keyword">import</span> xx</div><div class="line"><span class="keyword">from</span> module.xx.xx <span class="keyword">import</span> xx <span class="keyword">as</span> rename </div><div class="line"><span class="keyword">from</span> module.xx.xx <span class="keyword">import</span> *</div></pre></td></tr></table></figure>
<p>导入模块其实就是告诉Python解释器去解释那个py文件</p>
<ul>
<li>导入一个py文件，解释器解释该py文件</li>
<li>导入一个包，解释器解释该包下的 <strong>init</strong>.py 文件 【py2.7】</li>
</ul>
<p>那么问题来了，导入模块时是根据那个路径作为基准来进行的呢？即：sys.path</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">print</span> sys.path</div><div class="line"><span class="comment"># 结果：显示当前的python环境变量</span></div></pre></td></tr></table></figure>
<p>如果sys.path路径列表没有你想要的路径，可以通过 sys.path.append(‘路径’) 添加。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> os</div><div class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</div><div class="line">sys.path.append(project_path)</div></pre></td></tr></table></figure>
<h3 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h3><p>内置模块是Python自带的功能，在使用内置模块相应的功能时，需要【先导入】再【使用】</p>
<h4 id="一、sys"><a href="#一、sys" class="headerlink" title="一、sys"></a>一、sys</h4><p>用于提供对Python解释器相关的操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">sys.argv           <span class="comment">#命令行参数List，第一个元素是程序本身路径</span></div><div class="line">sys.exit(n)        <span class="comment">#退出程序，正常退出时exit(0)</span></div><div class="line">sys.version        <span class="comment">#获取Python解释程序的版本信息</span></div><div class="line">sys.maxint         <span class="comment">#最大的Int值</span></div><div class="line">sys.path           <span class="comment">#返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</span></div><div class="line">sys.platform       <span class="comment">#返回操作系统平台名称</span></div><div class="line">sys.stdin          <span class="comment">#输入相关</span></div><div class="line">sys.stdout         <span class="comment">#输出相关</span></div><div class="line">sys.stderror       <span class="comment">#错误相关</span></div></pre></td></tr></table></figure>
<p>进度百分比</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> time</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">view_bar</span><span class="params">(num, total)</span>:</span></div><div class="line">    rate = float(num) / float(total)</div><div class="line">    rate_num = int(rate * <span class="number">100</span>)</div><div class="line">    r = <span class="string">'\r%d%%'</span> % (rate_num, )</div><div class="line">    sys.stdout.write(r)</div><div class="line">    sys.stdout.flush()</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">100</span>):</div><div class="line">        time.sleep(<span class="number">0.1</span>)</div><div class="line">        view_bar(i, <span class="number">100</span>)</div></pre></td></tr></table></figure>
<h4 id="二、os"><a href="#二、os" class="headerlink" title="二、os"></a>二、os</h4><p>用于提供系统级别的操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">os.getcwd()                 <span class="comment">#获取当前工作目录，即当前python脚本工作的目录路径</span></div><div class="line">os.chdir(<span class="string">"dirname"</span>)         <span class="comment">#改变当前脚本工作目录；相当于shell下cd</span></div><div class="line">os.curdir                   <span class="comment">#返回当前目录: ('.')</span></div><div class="line">os.pardir                   <span class="comment">#获取当前目录的父目录字符串名：('..')</span></div><div class="line">os.makedirs(<span class="string">'dir1/dir2'</span>)    <span class="comment">#可生成多层递归目录</span></div><div class="line">os.removedirs(<span class="string">'dirname1'</span>)   <span class="comment">#若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span></div><div class="line">os.mkdir(<span class="string">'dirname'</span>)         <span class="comment">#生成单级目录；相当于shell中mkdir dirname</span></div><div class="line">os.rmdir(<span class="string">'dirname'</span>)         <span class="comment">#删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span></div><div class="line">os.listdir(<span class="string">'dirname'</span>)       <span class="comment">#列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span></div><div class="line">os.remove()                 <span class="comment">#删除一个文件</span></div><div class="line">os.rename(<span class="string">"oldname"</span>,<span class="string">"new"</span>)  <span class="comment">#重命名文件/目录</span></div><div class="line">os.stat(<span class="string">'path/filename'</span>)    <span class="comment">#获取文件/目录信息</span></div><div class="line">os.sep                      <span class="comment">#操作系统特定的路径分隔符，win下为"\\",Linux下为"/"</span></div><div class="line">os.linesep                  <span class="comment">#当前平台使用的行终止符，win下为"\t\n",Linux下为"\n"</span></div><div class="line">os.pathsep                  <span class="comment">#用于分割文件路径的字符串</span></div><div class="line">os.name                     <span class="comment">#字符串指示当前使用平台。win-&gt;'nt'; Linux-&gt;'posix'</span></div><div class="line">os.system(<span class="string">"bash command"</span>)   <span class="comment">#运行shell命令，直接显示</span></div><div class="line">os.environ                  <span class="comment">#获取系统环境变量</span></div><div class="line">os.path.abspath(path)       <span class="comment">#返回path规范化的绝对路径</span></div><div class="line">os.path.split(path)         <span class="comment">#将path分割成目录和文件名二元组返回</span></div><div class="line">os.path.dirname(path)       <span class="comment">#返回path的目录。其实就是os.path.split(path)的第一个元素</span></div><div class="line">os.path.basename(path)      <span class="comment">#返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span></div><div class="line">os.path.exists(path)        <span class="comment">#如果path存在，返回True；如果path不存在，返回False</span></div><div class="line">os.path.isabs(path)         <span class="comment">#如果path是绝对路径，返回True</span></div><div class="line">os.path.isfile(path)        <span class="comment">#如果path是一个存在的文件，返回True。否则返回False</span></div><div class="line">os.path.isdir(path)         <span class="comment">#如果path是一个存在的目录，则返回True。否则返回False</span></div><div class="line">os.path.join(path1[, path2[, ...]])  <span class="comment">#将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span></div><div class="line">os.path.getatime(path)      <span class="comment">#返回path所指向的文件或者目录的最后存取时间</span></div><div class="line">os.path.getmtime(path)      <span class="comment">#返回path所指向的文件或者目录的最后修改时间</span></div></pre></td></tr></table></figure>
<h4 id="三、hashlib"><a href="#三、hashlib" class="headerlink" title="三、hashlib"></a>三、hashlib</h4><p>用于加密相关的操作，代替了md5模块和sha模块，主要提供 SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> hashlib</div><div class="line"> </div><div class="line"><span class="comment"># ######## md5 ########</span></div><div class="line">hash = hashlib.md5()</div><div class="line"><span class="comment"># help(hash.update)</span></div><div class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</div><div class="line">print(hash.hexdigest())</div><div class="line">print(hash.digest())</div><div class="line"> </div><div class="line"><span class="comment">######## sha1 ########</span></div><div class="line"> </div><div class="line">hash = hashlib.sha1()</div><div class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</div><div class="line">print(hash.hexdigest())</div><div class="line"> </div><div class="line"><span class="comment"># ######## sha256 ########</span></div><div class="line"> </div><div class="line">hash = hashlib.sha256()</div><div class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</div><div class="line">print(hash.hexdigest())</div><div class="line"> </div><div class="line"><span class="comment"># ######## sha384 ########</span></div><div class="line"> </div><div class="line">hash = hashlib.sha384()</div><div class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</div><div class="line">print(hash.hexdigest())</div><div class="line"> </div><div class="line"><span class="comment"># ######## sha512 ########</span></div><div class="line"> </div><div class="line">hash = hashlib.sha512()</div><div class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</div><div class="line">print(hash.hexdigest())</div></pre></td></tr></table></figure>
<p>以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> hashlib</div><div class="line"> </div><div class="line"><span class="comment"># ######## md5 ########</span></div><div class="line"> </div><div class="line">hash = hashlib.md5(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</div><div class="line">hash.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</div><div class="line">print(hash.hexdigest())</div></pre></td></tr></table></figure>
<p>python内置还有一个 hmac 模块，它内部对我们创建 key 和 内容 进行进一步的处理然后再加密</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> hmac</div><div class="line"> </div><div class="line">h = hmac.new(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</div><div class="line">h.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</div><div class="line">print(h.hexdigest())</div></pre></td></tr></table></figure>
<h4 id="四、random"><a href="#四、random" class="headerlink" title="四、random"></a>四、random</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line"> </div><div class="line">print(random.random())</div><div class="line">print(random.randint(<span class="number">1</span>, <span class="number">2</span>))</div><div class="line">print(random.randrange(<span class="number">1</span>, <span class="number">10</span>))</div></pre></td></tr></table></figure>
<p>随机验证码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> random</div><div class="line">checkcode = <span class="string">''</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</div><div class="line">    current = random.randrange(<span class="number">0</span>,<span class="number">4</span>)</div><div class="line">    <span class="keyword">if</span> current != i:</div><div class="line">        temp = chr(random.randint(<span class="number">65</span>,<span class="number">90</span>))</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        temp = random.randint(<span class="number">0</span>,<span class="number">9</span>)</div><div class="line">    checkcode += str(temp)</div><div class="line"><span class="keyword">print</span> checkcode</div></pre></td></tr></table></figure>
<h4 id="五、re"><a href="#五、re" class="headerlink" title="五、re"></a>五、re</h4><p>python中re模块提供了正则表达式相关操作</p>
<p>字符：</p>
<p>　　. 匹配除换行符以外的任意字符<br>　　\w    匹配字母或数字或下划线或汉字<br>　　\s    匹配任意的空白符<br>　　\d    匹配数字<br>　　\b    匹配单词的开始或结束<br>　　^    匹配字符串的开始<br>　　$    匹配字符串的结束</p>
<p>次数：</p>
<ul>
<li>重复零次或更多次<br>  +重复一次或更多次<br>  　　?重复零次或一次<br>  　　{n}重复n次<br>  　　{n,}重复n次或更多次<br>  　　{n,m}重复n到m次</li>
</ul>
<h5 id="match"><a href="#match" class="headerlink" title="match"></a>match</h5><p>从起始位置开始匹配，匹配成功返回一个对象，未匹配成功返回None</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">match(pattern, string, flags=0)</div><div class="line"> # pattern： 正则模型</div><div class="line"> # string ： 要匹配的字符串</div><div class="line"> # falgs  ： 匹配模式</div><div class="line">     X  VERBOSE     Ignore whitespace and comments for nicer looking RE's.</div><div class="line">     I  IGNORECASE  Perform case-insensitive matching.</div><div class="line">     M  MULTILINE   "^" matches the beginning of lines (after a newline)</div><div class="line">                    as well as the string.</div><div class="line">                    "$" matches the end of lines (before a newline) as well</div><div class="line">                    as the end of the string.</div><div class="line">     S  DOTALL      "." matches any character at all, including the newline.</div><div class="line"> </div><div class="line">     A  ASCII       For string patterns, make \w, \W, \b, \B, \d, \D</div><div class="line">                    match the corresponding ASCII character categories</div><div class="line">                    (rather than the whole Unicode categories, which is the</div><div class="line">                    default).</div><div class="line">                    For bytes patterns, this flag is the only available</div><div class="line">                    behaviour and needn't be specified.</div><div class="line">      </div><div class="line">     L  LOCALE      Make \w, \W, \b, \B, dependent on the current locale.</div><div class="line">     U  UNICODE     For compatibility only. Ignored for string patterns (it</div><div class="line">                    is the default), and forbidden for bytes patterns.</div></pre></td></tr></table></figure>
<p>实例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 无分组</span></div><div class="line">r = re.match(<span class="string">"h\w+"</span>, origin)</div><div class="line">print(r.group())     <span class="comment"># 获取匹配到的所有结果</span></div><div class="line">print(r.groups())    <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line">print(r.groupdict()) <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line"></div><div class="line"><span class="comment"># 有分组</span></div><div class="line"></div><div class="line"><span class="comment"># 为何要有分组？提取匹配成功的指定内容（先匹配成功全部正则，再匹配成功的局部内容提取出来）</span></div><div class="line"></div><div class="line">r = re.match(<span class="string">"h(\w+).*(?P&lt;name&gt;\d)$"</span>, origin)</div><div class="line">print(r.group())     <span class="comment"># 获取匹配到的所有结果</span></div><div class="line">print(r.groups())    <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line">print(r.groupdict()) <span class="comment"># 获取模型中匹配到的分组中所有执行了key的组</span></div></pre></td></tr></table></figure>
<h5 id="search"><a href="#search" class="headerlink" title="search"></a>search</h5><p>浏览整个字符串去匹配第一个，未匹配成功返回None.<code>search(pattern, string, flags=0)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 无分组</span></div><div class="line"></div><div class="line">r = re.search(<span class="string">"a\w+"</span>, origin)</div><div class="line">print(r.group())     <span class="comment"># 获取匹配到的所有结果</span></div><div class="line">print(r.groups())    <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line">print(r.groupdict()) <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line"></div><div class="line"><span class="comment"># 有分组</span></div><div class="line"></div><div class="line">r = re.search(<span class="string">"a(\w+).*(?P&lt;name&gt;\d)$"</span>, origin)</div><div class="line">print(r.group())     <span class="comment"># 获取匹配到的所有结果</span></div><div class="line">print(r.groups())    <span class="comment"># 获取模型中匹配到的分组结果</span></div><div class="line">print(r.groupdict()) <span class="comment"># 获取模型中匹配到的分组中所有执行了key的组</span></div></pre></td></tr></table></figure>
<h5 id="findall"><a href="#findall" class="headerlink" title="findall"></a>findall</h5><p>获取非重复的匹配列表；如果有一个组则以列表形式返回，且每一个匹配均是字符串；如果模型中有多个组，则以列表形式返回，且每一个匹配均是元祖；空的匹配也会包含在结果中.<code>findall(pattern, string, flags=0)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 无分组</span></div><div class="line">r = re.findall(<span class="string">"a\w+"</span>,origin)</div><div class="line">print(r)</div><div class="line"></div><div class="line"><span class="comment"># 有分组</span></div><div class="line">origin = <span class="string">"hello alex bcd abcd lge acd 19"</span></div><div class="line">r = re.findall(<span class="string">"a((\w*)c)(d)"</span>, origin)</div><div class="line">print(r)</div></pre></td></tr></table></figure>
<h5 id="sub"><a href="#sub" class="headerlink" title="sub"></a>sub</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># sub，替换匹配成功的指定位置字符串</span></div><div class="line"> </div><div class="line">sub(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</div><div class="line"><span class="comment"># pattern： 正则模型</span></div><div class="line"><span class="comment"># repl   ： 要替换的字符串或可执行对象</span></div><div class="line"><span class="comment"># string ： 要匹配的字符串</span></div><div class="line"><span class="comment"># count  ： 指定匹配个数</span></div><div class="line"><span class="comment"># flags  ： 匹配模式python</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 与分组无关</span></div><div class="line"></div><div class="line">origin = <span class="string">"hello alex bcd alex lge alex acd 19"</span></div><div class="line">r = re.sub(<span class="string">"a\w+"</span>, <span class="string">"999"</span>, origin, <span class="number">2</span>)</div><div class="line">print(r)</div></pre></td></tr></table></figure>
<h5 id="split"><a href="#split" class="headerlink" title="split"></a>split</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># split，根据正则匹配分割字符串</span></div><div class="line"> </div><div class="line">split(pattern, string, maxsplit=<span class="number">0</span>, flags=<span class="number">0</span>)</div><div class="line"><span class="comment"># pattern： 正则模型</span></div><div class="line"><span class="comment"># string ： 要匹配的字符串</span></div><div class="line"><span class="comment"># maxsplit：指定分割个数</span></div><div class="line"><span class="comment"># flags  ： 匹配模式</span></div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 无分组</span></div><div class="line">      origin = <span class="string">"hello alex bcd alex lge alex acd 19"</span></div><div class="line">      r = re.split(<span class="string">"alex"</span>, origin, <span class="number">1</span>)</div><div class="line">      print(r)</div><div class="line"></div><div class="line">      <span class="comment"># 有分组</span></div><div class="line">      </div><div class="line">      origin = <span class="string">"hello alex bcd alex lge alex acd 19"</span></div><div class="line">      r1 = re.split(<span class="string">"(alex)"</span>, origin, <span class="number">1</span>)</div><div class="line">      print(r1)</div><div class="line">      r2 = re.split(<span class="string">"(al(ex))"</span>, origin, <span class="number">1</span>)</div><div class="line">      print(r2)</div></pre></td></tr></table></figure>
<p>正则匹配实例</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">IP：</div><div class="line">^(25[0-5]|2[0-4]\d|[0-1]?\d?\d)(\.(25[0-5]|2[0-4]\d|[0-1]?\d?\d))&#123;3&#125;$</div><div class="line">手机号：</div><div class="line">^1[3|4|5|8][0-9]\d&#123;8&#125;$</div><div class="line">邮箱：</div><div class="line">[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+</div></pre></td></tr></table></figure>
<h4 id="六、序列化"><a href="#六、序列化" class="headerlink" title="六、序列化"></a>六、序列化</h4><p>Python中用于序列化的两个模块</p>
<ul>
<li>json     用于【字符串】和 【python基本数据类型】 间进行转换</li>
<li>pickle   用于【python特有的类型】 和 【python基本数据类型】间进行转换</li>
</ul>
<p>Json模块提供了四个功能：dumps、dump、loads、load</p>
<p>pickle模块提供了四个功能：dumps、dump、loads、load</p>
<p><img src="https://i.loli.net/2017/07/14/59680fae6dcae.png" width="600px"></p>
<h4 id="七、configparser"><a href="#七、configparser" class="headerlink" title="七、configparser"></a>七、configparser</h4><p>configparser用于处理特定格式的文件，其本质上是利用open来操作文件。</p>
<p>指定格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 注释1</div><div class="line">;  注释2</div><div class="line"> </div><div class="line">[section1] # 节点</div><div class="line">k1 = v1    # 值</div><div class="line">k2:v2       # 值</div><div class="line"> </div><div class="line">[section2] # 节点</div><div class="line">k1 = v1    # 值</div></pre></td></tr></table></figure>
<p>1、获取所有节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line">ret = config.sections()</div><div class="line">print(ret)</div></pre></td></tr></table></figure>
<p>2、获取指定节点下所有的键值对</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line">ret = config.items(<span class="string">'section1'</span>)</div><div class="line">print(ret)</div></pre></td></tr></table></figure>
<p>3、获取指定节点下所有的建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line">ret = config.options(<span class="string">'section1'</span>)</div><div class="line">print(ret)</div></pre></td></tr></table></figure>
<p>4、获取指定节点下指定key的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line"> </div><div class="line"> </div><div class="line">v = config.get(<span class="string">'section1'</span>, <span class="string">'k1'</span>)</div><div class="line"><span class="comment"># v = config.getint('section1', 'k1')</span></div><div class="line"><span class="comment"># v = config.getfloat('section1', 'k1')</span></div><div class="line"><span class="comment"># v = config.getboolean('section1', 'k1')</span></div><div class="line">print(v)</div></pre></td></tr></table></figure>
<p>5、检查、删除、添加节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line"> </div><div class="line"><span class="comment"># 检查</span></div><div class="line">has_sec = config.has_section(<span class="string">'section1'</span>)</div><div class="line">print(has_sec)</div><div class="line"> </div><div class="line"><span class="comment"># 添加节点</span></div><div class="line">config.add_section(<span class="string">"SEC_1"</span>)</div><div class="line">config.write(open(<span class="string">'xxxooo'</span>, <span class="string">'w'</span>))</div><div class="line"> </div><div class="line"><span class="comment"># 删除节点</span></div><div class="line">config.remove_section(<span class="string">"SEC_1"</span>)</div><div class="line">config.write(open(<span class="string">'xxxooo'</span>, <span class="string">'w'</span>))</div></pre></td></tr></table></figure>
<p>6、检查、删除、设置指定组内的键值对</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> configparser</div><div class="line"> </div><div class="line">config = configparser.ConfigParser()</div><div class="line">config.read(<span class="string">'xxxooo'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line"> </div><div class="line"><span class="comment"># 检查</span></div><div class="line">has_opt = config.has_option(<span class="string">'section1'</span>, <span class="string">'k1'</span>)</div><div class="line">print(has_opt)</div><div class="line"> </div><div class="line"><span class="comment"># 删除</span></div><div class="line">config.remove_option(<span class="string">'section1'</span>, <span class="string">'k1'</span>)</div><div class="line">config.write(open(<span class="string">'xxxooo'</span>, <span class="string">'w'</span>))</div><div class="line"> </div><div class="line"><span class="comment"># 设置</span></div><div class="line">config.set(<span class="string">'section1'</span>, <span class="string">'k10'</span>, <span class="string">"123"</span>)</div><div class="line">config.write(open(<span class="string">'xxxooo'</span>, <span class="string">'w'</span>))</div></pre></td></tr></table></figure>
<h4 id="八、XML"><a href="#八、XML" class="headerlink" title="八、XML"></a>八、XML</h4><p>XML是实现不同语言或程序之间进行数据交换的协议，现在大多都使用json了，但是银行等相关“传统”的企业很多还在使用xml，XML文件格式如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Liechtenstein"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2023<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Austria"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Switzerland"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Singapore"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"N"</span> <span class="attr">name</span>=<span class="string">"Malaysia"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Panama"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Costa Rica"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Colombia"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="1、解析XML"><a href="#1、解析XML" class="headerlink" title="1、解析XML"></a>1、解析XML</h5><p>利用ElementTree.XML将字符串解析成xml对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment"># 打开文件，读取XML内容</span></div><div class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()</div><div class="line"></div><div class="line"><span class="comment"># 将字符串解析成xml特殊对象，root代指xml文件的根节点</span></div><div class="line">root = ET.XML(str_xml)</div></pre></td></tr></table></figure>
<p>利用ElementTree.parse将文件直接解析成xml对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment"># 直接解析xml文件</span></div><div class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取xml文件的根节点</span></div><div class="line">root = tree.getroot()</div></pre></td></tr></table></figure>
<h5 id="2、操作XML"><a href="#2、操作XML" class="headerlink" title="2、操作XML"></a>2、操作XML</h5><p>XML格式类型是节点嵌套节点，对于每一个节点均有以下功能，以便对当前节点进行操作：</p>
<p>节点功能一览表:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Element</span>:</span></div><div class="line">    <span class="string">"""An XML element.</span></div><div class="line"></div><div class="line">    This class is the reference implementation of the Element interface.</div><div class="line"></div><div class="line">    An element's length is its number of subelements.  That means if you</div><div class="line">    want to check if an element is truly empty, you should check BOTH</div><div class="line">    its length AND its text attribute.</div><div class="line"></div><div class="line">    The element tag, attribute names, and attribute values can be either</div><div class="line">    bytes or strings.</div><div class="line"></div><div class="line">    *tag* is the element name.  *attrib* is an optional dictionary containing</div><div class="line">    element attributes. *extra* are additional element attributes given as</div><div class="line">    keyword arguments.</div><div class="line"></div><div class="line">    Example form:</div><div class="line">        &lt;tag attrib&gt;text&lt;child/&gt;...&lt;/tag&gt;tail</div><div class="line"></div><div class="line">    """</div><div class="line"></div><div class="line">    当前节点的标签名</div><div class="line">    tag = <span class="keyword">None</span></div><div class="line">    <span class="string">"""The element's name."""</span></div><div class="line"></div><div class="line">    当前节点的属性</div><div class="line"></div><div class="line">    attrib = <span class="keyword">None</span></div><div class="line">    <span class="string">"""Dictionary of the element's attributes."""</span></div><div class="line"></div><div class="line">    当前节点的内容</div><div class="line">    text = <span class="keyword">None</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    Text before first subelement. This is either a string or the value None.</div><div class="line">    Note that if there is no text, this attribute may be either</div><div class="line">    None or the empty string, depending on the parser.</div><div class="line"></div><div class="line">    """</div><div class="line"></div><div class="line">    tail = <span class="keyword">None</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    Text after this element's end tag, but before the next sibling element's</div><div class="line">    start tag.  This is either a string or the value None.  Note that if there</div><div class="line">    was no text, this attribute may be either None or an empty string,</div><div class="line">    depending on the parser.</div><div class="line"></div><div class="line">    """</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, tag, attrib=&#123;&#125;, **extra)</span>:</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(attrib, dict):</div><div class="line">            <span class="keyword">raise</span> TypeError(<span class="string">"attrib must be dict, not %s"</span> % (</div><div class="line">                attrib.__class__.__name__,))</div><div class="line">        attrib = attrib.copy()</div><div class="line">        attrib.update(extra)</div><div class="line">        self.tag = tag</div><div class="line">        self.attrib = attrib</div><div class="line">        self._children = []</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"&lt;%s %r at %#x&gt;"</span> % (self.__class__.__name__, self.tag, id(self))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">makeelement</span><span class="params">(self, tag, attrib)</span>:</span></div><div class="line">        创建一个新节点</div><div class="line">        <span class="string">"""Create a new element with the same type.</span></div><div class="line"></div><div class="line">        *tag* is a string containing the element name.</div><div class="line">        *attrib* is a dictionary containing the element attributes.</div><div class="line"></div><div class="line">        Do not call this method, use the SubElement factory function instead.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> self.__class__(tag, attrib)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copy</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="string">"""Return copy of current element.</span></div><div class="line"></div><div class="line">        This creates a shallow copy. Subelements will be shared with the</div><div class="line">        original tree.</div><div class="line"></div><div class="line">        """</div><div class="line">        elem = self.makeelement(self.tag, self.attrib)</div><div class="line">        elem.text = self.text</div><div class="line">        elem.tail = self.tail</div><div class="line">        elem[:] = self</div><div class="line">        <span class="keyword">return</span> elem</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> len(self._children)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></div><div class="line">        warnings.warn(</div><div class="line">            <span class="string">"The behavior of this method will change in future versions.  "</span></div><div class="line">            <span class="string">"Use specific 'len(elem)' or 'elem is not None' test instead."</span>,</div><div class="line">            FutureWarning, stacklevel=<span class="number">2</span></div><div class="line">            )</div><div class="line">        <span class="keyword">return</span> len(self._children) != <span class="number">0</span> <span class="comment"># emulate old behaviour, for now</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, index)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._children[index]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, index, element)</span>:</span></div><div class="line">        <span class="comment"># if isinstance(index, slice):</span></div><div class="line">        <span class="comment">#     for elt in element:</span></div><div class="line">        <span class="comment">#         assert iselement(elt)</span></div><div class="line">        <span class="comment"># else:</span></div><div class="line">        <span class="comment">#     assert iselement(element)</span></div><div class="line">        self._children[index] = element</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, index)</span>:</span></div><div class="line">        <span class="keyword">del</span> self._children[index]</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">append</span><span class="params">(self, subelement)</span>:</span></div><div class="line">        为当前节点追加一个子节点</div><div class="line">        <span class="string">"""Add *subelement* to the end of this element.</span></div><div class="line"></div><div class="line">        The new element will appear in document order after the last existing</div><div class="line">        subelement (or directly after the text, if it's the first subelement),</div><div class="line">        but before the end tag for this element.</div><div class="line"></div><div class="line">        """</div><div class="line">        self._assert_is_element(subelement)</div><div class="line">        self._children.append(subelement)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">extend</span><span class="params">(self, elements)</span>:</span></div><div class="line">        为当前节点扩展 n 个子节点</div><div class="line">        <span class="string">"""Append subelements from a sequence.</span></div><div class="line"></div><div class="line">        *elements* is a sequence with zero or more elements.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> elements:</div><div class="line">            self._assert_is_element(element)</div><div class="line">        self._children.extend(elements)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(self, index, subelement)</span>:</span></div><div class="line">        在当前节点的子节点中插入某个节点，即：为当前节点创建子节点，然后插入指定位置</div><div class="line">        <span class="string">"""Insert *subelement* at position *index*."""</span></div><div class="line">        self._assert_is_element(subelement)</div><div class="line">        self._children.insert(index, subelement)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_assert_is_element</span><span class="params">(self, e)</span>:</span></div><div class="line">        <span class="comment"># Need to refer to the actual Python implementation, not the</span></div><div class="line">        <span class="comment"># shadowing C implementation.</span></div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(e, _Element_Py):</div><div class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'expected an Element, not %s'</span> % type(e).__name__)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self, subelement)</span>:</span></div><div class="line">        在当前节点在子节点中删除某个节点</div><div class="line">        <span class="string">"""Remove matching subelement.</span></div><div class="line"></div><div class="line">        Unlike the find methods, this method compares elements based on</div><div class="line">        identity, NOT ON tag value or contents.  To remove subelements by</div><div class="line">        other means, the easiest way is to use a list comprehension to</div><div class="line">        select what elements to keep, and then use slice assignment to update</div><div class="line">        the parent element.</div><div class="line"></div><div class="line">        ValueError is raised if a matching element could not be found.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="comment"># assert iselement(element)</span></div><div class="line">        self._children.remove(subelement)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getchildren</span><span class="params">(self)</span>:</span></div><div class="line">        获取所有的子节点（废弃）</div><div class="line">        <span class="string">"""(Deprecated) Return all subelements.</span></div><div class="line"></div><div class="line">        Elements are returned in document order.</div><div class="line"></div><div class="line">        """</div><div class="line">        warnings.warn(</div><div class="line">            <span class="string">"This method will be removed in future versions.  "</span></div><div class="line">            <span class="string">"Use 'list(elem)' or iteration over elem instead."</span>,</div><div class="line">            DeprecationWarning, stacklevel=<span class="number">2</span></div><div class="line">            )</div><div class="line">        <span class="keyword">return</span> self._children</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(self, path, namespaces=None)</span>:</span></div><div class="line">        获取第一个寻找到的子节点</div><div class="line">        <span class="string">"""Find first matching element by tag name or path.</span></div><div class="line"></div><div class="line">        *path* is a string having either an element tag or an XPath,</div><div class="line">        *namespaces* is an optional mapping from namespace prefix to full name.</div><div class="line"></div><div class="line">        Return the first matching element, or None if no element was found.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> ElementPath.find(self, path, namespaces)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findtext</span><span class="params">(self, path, default=None, namespaces=None)</span>:</span></div><div class="line">        获取第一个寻找到的子节点的内容</div><div class="line">        <span class="string">"""Find text for first matching element by tag name or path.</span></div><div class="line"></div><div class="line">        *path* is a string having either an element tag or an XPath,</div><div class="line">        *default* is the value to return if the element was not found,</div><div class="line">        *namespaces* is an optional mapping from namespace prefix to full name.</div><div class="line"></div><div class="line">        Return text content of first matching element, or default value if</div><div class="line">        none was found.  Note that if an element is found having no text</div><div class="line">        content, the empty string is returned.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> ElementPath.findtext(self, path, default, namespaces)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findall</span><span class="params">(self, path, namespaces=None)</span>:</span></div><div class="line">        获取所有的子节点</div><div class="line">        <span class="string">"""Find all matching subelements by tag name or path.</span></div><div class="line"></div><div class="line">        *path* is a string having either an element tag or an XPath,</div><div class="line">        *namespaces* is an optional mapping from namespace prefix to full name.</div><div class="line"></div><div class="line">        Returns list containing all matching elements in document order.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> ElementPath.findall(self, path, namespaces)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">iterfind</span><span class="params">(self, path, namespaces=None)</span>:</span></div><div class="line">        获取所有指定的节点，并创建一个迭代器（可以被<span class="keyword">for</span>循环）</div><div class="line">        <span class="string">"""Find all matching subelements by tag name or path.</span></div><div class="line"></div><div class="line">        *path* is a string having either an element tag or an XPath,</div><div class="line">        *namespaces* is an optional mapping from namespace prefix to full name.</div><div class="line"></div><div class="line">        Return an iterable yielding all matching elements in document order.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> ElementPath.iterfind(self, path, namespaces)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">clear</span><span class="params">(self)</span>:</span></div><div class="line">        清空节点</div><div class="line">        <span class="string">"""Reset element.</span></div><div class="line"></div><div class="line">        This function removes all subelements, clears all attributes, and sets</div><div class="line">        the text and tail attributes to None.</div><div class="line"></div><div class="line">        """</div><div class="line">        self.attrib.clear()</div><div class="line">        self._children = []</div><div class="line">        self.text = self.tail = <span class="keyword">None</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, key, default=None)</span>:</span></div><div class="line">        获取当前节点的属性值</div><div class="line">        <span class="string">"""Get element attribute.</span></div><div class="line"></div><div class="line">        Equivalent to attrib.get, but some implementations may handle this a</div><div class="line">        bit more efficiently.  *key* is what attribute to look for, and</div><div class="line">        *default* is what to return if the attribute was not found.</div><div class="line"></div><div class="line">        Returns a string containing the attribute value, or the default if</div><div class="line">        attribute was not found.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> self.attrib.get(key, default)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set</span><span class="params">(self, key, value)</span>:</span></div><div class="line">        为当前节点设置属性值</div><div class="line">        <span class="string">"""Set element attribute.</span></div><div class="line"></div><div class="line">        Equivalent to attrib[key] = value, but some implementations may handle</div><div class="line">        this a bit more efficiently.  *key* is what attribute to set, and</div><div class="line">        *value* is the attribute value to set it to.</div><div class="line"></div><div class="line">        """</div><div class="line">        self.attrib[key] = value</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keys</span><span class="params">(self)</span>:</span></div><div class="line">        获取当前节点的所有属性的 key</div><div class="line"></div><div class="line">        <span class="string">"""Get list of attribute names.</span></div><div class="line"></div><div class="line">        Names are returned in an arbitrary order, just like an ordinary</div><div class="line">        Python dict.  Equivalent to attrib.keys()</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> self.attrib.keys()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">items</span><span class="params">(self)</span>:</span></div><div class="line">        获取当前节点的所有属性值，每个属性都是一个键值对</div><div class="line">        <span class="string">"""Get element attributes as a sequence.</span></div><div class="line"></div><div class="line">        The attributes are returned in arbitrary order.  Equivalent to</div><div class="line">        attrib.items().</div><div class="line"></div><div class="line">        Return a list of (name, value) tuples.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">return</span> self.attrib.items()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">iter</span><span class="params">(self, tag=None)</span>:</span></div><div class="line">        在当前节点的子孙中根据节点名称寻找所有指定的节点，并返回一个迭代器（可以被<span class="keyword">for</span>循环）。</div><div class="line">        <span class="string">"""Create tree iterator.</span></div><div class="line"></div><div class="line">        The iterator loops over the element and all subelements in document</div><div class="line">        order, returning all elements with a matching tag.</div><div class="line"></div><div class="line">        If the tree structure is modified during iteration, new or removed</div><div class="line">        elements may or may not be included.  To get a stable set, use the</div><div class="line">        list() function on the iterator, and loop over the resulting list.</div><div class="line"></div><div class="line">        *tag* is what tags to look for (default is to return all elements)</div><div class="line"></div><div class="line">        Return an iterator containing all the matching elements.</div><div class="line"></div><div class="line">        """</div><div class="line">        <span class="keyword">if</span> tag == <span class="string">"*"</span>:</div><div class="line">            tag = <span class="keyword">None</span></div><div class="line">        <span class="keyword">if</span> tag <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">or</span> self.tag == tag:</div><div class="line">            <span class="keyword">yield</span> self</div><div class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self._children:</div><div class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> e.iter(tag)</div><div class="line"></div><div class="line">    <span class="comment"># compatibility</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getiterator</span><span class="params">(self, tag=None)</span>:</span></div><div class="line">        <span class="comment"># Change for a DeprecationWarning in 1.4</span></div><div class="line">        warnings.warn(</div><div class="line">            <span class="string">"This method will be removed in future versions.  "</span></div><div class="line">            <span class="string">"Use 'elem.iter()' or 'list(elem.iter())' instead."</span>,</div><div class="line">            PendingDeprecationWarning, stacklevel=<span class="number">2</span></div><div class="line">        )</div><div class="line">        <span class="keyword">return</span> list(self.iter(tag))</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">itertext</span><span class="params">(self)</span>:</span></div><div class="line">        在当前节点的子孙中根据节点名称寻找所有指定的节点的内容，并返回一个迭代器（可以被<span class="keyword">for</span>循环）。</div><div class="line">        <span class="string">"""Create text iterator.</span></div><div class="line"></div><div class="line">        The iterator loops over the element and all subelements in document</div><div class="line">        order, returning all inner text.</div><div class="line"></div><div class="line">        """</div><div class="line">        tag = self.tag</div><div class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(tag, str) <span class="keyword">and</span> tag <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</div><div class="line">            <span class="keyword">return</span></div><div class="line">        <span class="keyword">if</span> self.text:</div><div class="line">            <span class="keyword">yield</span> self.text</div><div class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self:</div><div class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> e.itertext()</div><div class="line">            <span class="keyword">if</span> e.tail:</div><div class="line">                <span class="keyword">yield</span> e.tail</div></pre></td></tr></table></figure>
<p>由于 每个节点 都具有以上的方法，并且在上一步骤中解析时均得到了root（xml文件的根节点），so   可以利用以上方法进行操作xml文件。</p>
<p>a. 遍历XML文档的所有内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"><span class="comment">############ 解析方式一 ############</span></div><div class="line"><span class="string">"""</span></div><div class="line"># 打开文件，读取XML内容</div><div class="line">str_xml = open('xo.xml', 'r').read()</div><div class="line"></div><div class="line"># 将字符串解析成xml特殊对象，root代指xml文件的根节点</div><div class="line">root = ET.XML(str_xml)</div><div class="line">"""</div><div class="line"><span class="comment">############ 解析方式二 ############</span></div><div class="line"><span class="comment"># 直接解析xml文件</span></div><div class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取xml文件的根节点</span></div><div class="line">root = tree.getroot()</div><div class="line"></div><div class="line"><span class="comment">### 操作</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 遍历XML文档的第二层</span></div><div class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:</div><div class="line">    <span class="comment"># 第二层节点的标签名称和标签属性</span></div><div class="line">    print(child.tag, child.attrib)</div><div class="line">    <span class="comment"># 遍历XML文档的第三层</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> child:</div><div class="line">        <span class="comment"># 第二层节点的标签名称和内容</span></div><div class="line">        print(i.tag,i.text)</div></pre></td></tr></table></figure>
<p>b、遍历XML中指定的节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment">############ 解析方式一 ############</span></div><div class="line"><span class="string">"""</span></div><div class="line"># 打开文件，读取XML内容</div><div class="line">str_xml = open('xo.xml', 'r').read()</div><div class="line"></div><div class="line"># 将字符串解析成xml特殊对象，root代指xml文件的根节点</div><div class="line">root = ET.XML(str_xml)</div><div class="line">"""</div><div class="line"><span class="comment">############ 解析方式二 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 直接解析xml文件</span></div><div class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取xml文件的根节点</span></div><div class="line">root = tree.getroot()</div><div class="line"></div><div class="line"><span class="comment">### 操作</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 遍历XML中所有的year节点</span></div><div class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):</div><div class="line">    <span class="comment"># 节点的标签名称和内容</span></div><div class="line">    print(node.tag, node.text)</div></pre></td></tr></table></figure>
<p>c、修改节点内容</p>
<p>由于修改的节点时，均是在内存中进行，其不会影响文件中的内容。所以，如果想要修改，则需要重新将内存中的内容写到文件。</p>
<p>解析字符串方式，修改，保存:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment">############ 解析方式一 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 打开文件，读取XML内容</span></div><div class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()</div><div class="line"></div><div class="line"><span class="comment"># 将字符串解析成xml特殊对象，root代指xml文件的根节点</span></div><div class="line">root = ET.XML(str_xml)</div><div class="line"></div><div class="line"><span class="comment">############ 操作 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 循环所有的year节点</span></div><div class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):</div><div class="line">    <span class="comment"># 将year节点中的内容自增一</span></div><div class="line">    new_year = int(node.text) + <span class="number">1</span></div><div class="line">    node.text = str(new_year)</div><div class="line"></div><div class="line">    <span class="comment"># 设置属性</span></div><div class="line">    node.set(<span class="string">'name'</span>, <span class="string">'alex'</span>)</div><div class="line">    node.set(<span class="string">'age'</span>, <span class="string">'18'</span>)</div><div class="line">    <span class="comment"># 删除属性</span></div><div class="line">    <span class="keyword">del</span> node.attrib[<span class="string">'name'</span>]</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">############ 保存文件 ############</span></div><div class="line">tree = ET.ElementTree(root)</div><div class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p>解析文件方式，修改，保存:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment">############ 解析方式二 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 直接解析xml文件</span></div><div class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取xml文件的根节点</span></div><div class="line">root = tree.getroot()</div><div class="line"></div><div class="line"><span class="comment">############ 操作 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 循环所有的year节点</span></div><div class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):</div><div class="line">    <span class="comment"># 将year节点中的内容自增一</span></div><div class="line">    new_year = int(node.text) + <span class="number">1</span></div><div class="line">    node.text = str(new_year)</div><div class="line"></div><div class="line">    <span class="comment"># 设置属性</span></div><div class="line">    node.set(<span class="string">'name'</span>, <span class="string">'alex'</span>)</div><div class="line">    node.set(<span class="string">'age'</span>, <span class="string">'18'</span>)</div><div class="line">    <span class="comment"># 删除属性</span></div><div class="line">    <span class="keyword">del</span> node.attrib[<span class="string">'name'</span>]</div><div class="line"></div><div class="line"><span class="comment">############ 保存文件 ############</span></div><div class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p>d、删除节点</p>
<p>解析字符串方式打开，删除，保存:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment">############ 解析字符串方式打开 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 打开文件，读取XML内容</span></div><div class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()</div><div class="line"></div><div class="line"><span class="comment"># 将字符串解析成xml特殊对象，root代指xml文件的根节点</span></div><div class="line">root = ET.XML(str_xml)</div><div class="line"></div><div class="line"><span class="comment">############ 操作 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 遍历data下的所有country节点</span></div><div class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</div><div class="line">    <span class="comment"># 获取每一个country节点下rank节点的内容</span></div><div class="line">    rank = int(country.find(<span class="string">'rank'</span>).text)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</div><div class="line">        <span class="comment"># 删除指定country节点</span></div><div class="line">        root.remove(country)</div><div class="line"></div><div class="line"><span class="comment">############ 保存文件 ############</span></div><div class="line">tree = ET.ElementTree(root)</div><div class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p>解析文件方式打开，删除，保存:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment">############ 解析文件方式 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 直接解析xml文件</span></div><div class="line">tree = ET.parse(<span class="string">"xo.xml"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 获取xml文件的根节点</span></div><div class="line">root = tree.getroot()</div><div class="line"></div><div class="line"><span class="comment">############ 操作 ############</span></div><div class="line"></div><div class="line"><span class="comment"># 顶层标签</span></div><div class="line">print(root.tag)</div><div class="line"></div><div class="line"><span class="comment"># 遍历data下的所有country节点</span></div><div class="line"><span class="keyword">for</span> country <span class="keyword">in</span> root.findall(<span class="string">'country'</span>):</div><div class="line">    <span class="comment"># 获取每一个country节点下rank节点的内容</span></div><div class="line">    rank = int(country.find(<span class="string">'rank'</span>).text)</div><div class="line"></div><div class="line">    <span class="keyword">if</span> rank &gt; <span class="number">50</span>:</div><div class="line">        <span class="comment"># 删除指定country节点</span></div><div class="line">        root.remove(country)</div><div class="line"></div><div class="line"><span class="comment">############ 保存文件 ############</span></div><div class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<h5 id="3、创建XML文档"><a href="#3、创建XML文档" class="headerlink" title="3、创建XML文档"></a>3、创建XML文档</h5><p>创建方式（一）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建根节点</span></div><div class="line">root = ET.Element(<span class="string">"famliy"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建节点大儿子</span></div><div class="line">son1 = ET.Element(<span class="string">'son'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)</div><div class="line"><span class="comment"># 创建小儿子</span></div><div class="line">son2 = ET.Element(<span class="string">'son'</span>, &#123;<span class="string">"name"</span>: <span class="string">'儿2'</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment"># 在大儿子中创建两个孙子</span></div><div class="line">grandson1 = ET.Element(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</div><div class="line">grandson2 = ET.Element(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿12'</span>&#125;)</div><div class="line">son1.append(grandson1)</div><div class="line">son1.append(grandson2)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 把儿子添加到根节点中</span></div><div class="line">root.append(son1)</div><div class="line">root.append(son1)</div><div class="line"></div><div class="line">tree = ET.ElementTree(root)</div><div class="line">tree.write(<span class="string">'oooo.xml'</span>,encoding=<span class="string">'utf-8'</span>, short_empty_elements=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>创建方式（二）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment"># 创建根节点</span></div><div class="line">root = ET.Element(<span class="string">"famliy"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建大儿子</span></div><div class="line"><span class="comment"># son1 = ET.Element('son', &#123;'name': '儿1'&#125;)</span></div><div class="line">son1 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)</div><div class="line"><span class="comment"># 创建小儿子</span></div><div class="line"><span class="comment"># son2 = ET.Element('son', &#123;"name": '儿2'&#125;)</span></div><div class="line">son2 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">"name"</span>: <span class="string">'儿2'</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment"># 在大儿子中创建两个孙子</span></div><div class="line"><span class="comment"># grandson1 = ET.Element('grandson', &#123;'name': '儿11'&#125;)</span></div><div class="line">grandson1 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</div><div class="line"><span class="comment"># grandson2 = ET.Element('grandson', &#123;'name': '儿12'&#125;)</span></div><div class="line">grandson2 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿12'</span>&#125;)</div><div class="line"></div><div class="line">son1.append(grandson1)</div><div class="line">son1.append(grandson2)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 把儿子添加到根节点中</span></div><div class="line">root.append(son1)</div><div class="line">root.append(son1)</div><div class="line"></div><div class="line">tree = ET.ElementTree(root)</div><div class="line">tree.write(<span class="string">'oooo.xml'</span>,encoding=<span class="string">'utf-8'</span>, short_empty_elements=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>创建方式（三）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建根节点</span></div><div class="line">root = ET.Element(<span class="string">"famliy"</span>)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 创建节点大儿子</span></div><div class="line">son1 = ET.SubElement(root, <span class="string">"son"</span>, attrib=&#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)</div><div class="line"><span class="comment"># 创建小儿子</span></div><div class="line">son2 = ET.SubElement(root, <span class="string">"son"</span>, attrib=&#123;<span class="string">"name"</span>: <span class="string">"儿2"</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment"># 在大儿子中创建一个孙子</span></div><div class="line">grandson1 = ET.SubElement(son1, <span class="string">"age"</span>, attrib=&#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</div><div class="line">grandson1.text = <span class="string">'孙子'</span></div><div class="line"></div><div class="line"></div><div class="line">et = ET.ElementTree(root)  <span class="comment">#生成文档对象</span></div><div class="line">et.write(<span class="string">"test.xml"</span>, encoding=<span class="string">"utf-8"</span>, xml_declaration=<span class="keyword">True</span>, short_empty_elements=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>由于原生保存的XML时默认无缩进，如果想要设置缩进的话， 需要修改保存方式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">prettify</span><span class="params">(elem)</span>:</span></div><div class="line">    <span class="string">"""将节点转换成字符串，并添加缩进。</span></div><div class="line">    """</div><div class="line">    rough_string = ET.tostring(elem, <span class="string">'utf-8'</span>)</div><div class="line">    reparsed = minidom.parseString(rough_string)</div><div class="line">    <span class="keyword">return</span> reparsed.toprettyxml(indent=<span class="string">"\t"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建根节点</span></div><div class="line">root = ET.Element(<span class="string">"famliy"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 创建大儿子</span></div><div class="line"><span class="comment"># son1 = ET.Element('son', &#123;'name': '儿1'&#125;)</span></div><div class="line">son1 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)</div><div class="line"><span class="comment"># 创建小儿子</span></div><div class="line"><span class="comment"># son2 = ET.Element('son', &#123;"name": '儿2'&#125;)</span></div><div class="line">son2 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">"name"</span>: <span class="string">'儿2'</span>&#125;)</div><div class="line"></div><div class="line"><span class="comment"># 在大儿子中创建两个孙子</span></div><div class="line"><span class="comment"># grandson1 = ET.Element('grandson', &#123;'name': '儿11'&#125;)</span></div><div class="line">grandson1 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</div><div class="line"><span class="comment"># grandson2 = ET.Element('grandson', &#123;'name': '儿12'&#125;)</span></div><div class="line">grandson2 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿12'</span>&#125;)</div><div class="line"></div><div class="line">son1.append(grandson1)</div><div class="line">son1.append(grandson2)</div><div class="line"></div><div class="line"><span class="comment"># 把儿子添加到根节点中</span></div><div class="line">root.append(son1)</div><div class="line">root.append(son1)</div><div class="line"></div><div class="line">raw_str = prettify(root)</div><div class="line"></div><div class="line">f = open(<span class="string">"xxxoo.xml"</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>)</div><div class="line">f.write(raw_str)</div><div class="line">f.close()</div></pre></td></tr></table></figure>
<h5 id="4、命名空间"><a href="#4、命名空间" class="headerlink" title="4、命名空间"></a>4、命名空间</h5><p>详细介绍，<a href="http://www.w3school.com.cn/xml/xml_namespaces.asp" target="_blank" rel="external">猛击这里</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line">ET.register_namespace(<span class="string">'com'</span>,<span class="string">"http://www.company.com"</span>) <span class="comment">#some name</span></div><div class="line"></div><div class="line"><span class="comment"># build a tree structure</span></div><div class="line">root = ET.Element(<span class="string">"&#123;http://www.company.com&#125;STUFF"</span>)</div><div class="line">body = ET.SubElement(root, <span class="string">"&#123;http://www.company.com&#125;MORE_STUFF"</span>, attrib=&#123;<span class="string">"&#123;http://www.company.com&#125;hhh"</span>: <span class="string">"123"</span>&#125;)</div><div class="line">body.text = <span class="string">"STUFF EVERYWHERE!"</span></div><div class="line"></div><div class="line"><span class="comment"># wrap it in an ElementTree instance, and save as XML</span></div><div class="line">tree = ET.ElementTree(root)</div><div class="line"></div><div class="line">tree.write(<span class="string">"page.xml"</span>,</div><div class="line">           xml_declaration=<span class="keyword">True</span>,</div><div class="line">           encoding=<span class="string">'utf-8'</span>,</div><div class="line">           method=<span class="string">"xml"</span>)</div></pre></td></tr></table></figure>
<h4 id="九、requests"><a href="#九、requests" class="headerlink" title="九、requests"></a>九、requests</h4><p>Python标准库中提供了：urllib等模块以供Http请求，但是，它的 API 太渣了。它是为另一个时代、另一个互联网所创建的。它需要巨量的工作，甚至包括各种方法覆盖，来完成最简单的任务。</p>
<p>发送GET请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"></div><div class="line">f = urllib.request.urlopen(<span class="string">'http://www.webxml.com.cn//webservices/qqOnlineWebService.asmx/qqCheckOnline?qqCode=424662508'</span>)</div><div class="line">result = f.read().decode(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p>发送携带请求头的GET请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"></div><div class="line">req = urllib.request.Request(<span class="string">'http://www.example.com/'</span>)</div><div class="line">req.add_header(<span class="string">'Referer'</span>, <span class="string">'http://www.python.org/'</span>)</div><div class="line">r = urllib.request.urlopen(req)</div><div class="line"></div><div class="line">result = f.read().decode(<span class="string">'utf-8'</span>)</div></pre></td></tr></table></figure>
<p><em>注：更多见Python官方文档：<a href="https://docs.python.org/3.5/library/urllib.request.html#module-urllib.request" target="_blank" rel="external">https://docs.python.org/3.5/library/urllib.request.html#module-urllib.request</a></em></p>
<p>Requests 是使用 Apache2 Licensed 许可证的 基于Python开发的HTTP 库，其在Python内置模块的基础上进行了高度的封装，从而使得Pythoner进行网络请求时，变得美好了许多，使用Requests可以轻而易举的完成浏览器所有的任何操作。</p>
<h5 id="1、安装模块"><a href="#1、安装模块" class="headerlink" title="1、安装模块"></a>1、安装模块</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install requests</div></pre></td></tr></table></figure>
<h5 id="2、使用模块"><a href="#2、使用模块" class="headerlink" title="2、使用模块"></a>2、使用模块</h5><p>GET请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 1、无参数实例</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"> </div><div class="line">ret = requests.get(<span class="string">'https://github.com/timeline.json'</span>)</div><div class="line"> </div><div class="line">print(ret.url)</div><div class="line">print(ret.text)</div><div class="line"> </div><div class="line"><span class="comment"># 2、有参数实例</span></div><div class="line"> </div><div class="line"><span class="keyword">import</span> requests</div><div class="line"> </div><div class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</div><div class="line">ret = requests.get(<span class="string">"http://httpbin.org/get"</span>, params=payload)</div><div class="line"> </div><div class="line">print(ret.url)</div><div class="line">print(ret.text)</div></pre></td></tr></table></figure>
<p>POST请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 1、基本POST实例</span></div><div class="line"><span class="keyword">import</span> requests</div><div class="line"> </div><div class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</div><div class="line">ret = requests.post(<span class="string">"http://httpbin.org/post"</span>, data=payload)</div><div class="line"> </div><div class="line">print(ret.text)</div><div class="line"> </div><div class="line"><span class="comment"># 2、发送请求头和数据实例</span></div><div class="line"> </div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> json</div><div class="line"> </div><div class="line">url = <span class="string">'https://api.github.com/some/endpoint'</span></div><div class="line">payload = &#123;<span class="string">'some'</span>: <span class="string">'data'</span>&#125;</div><div class="line">headers = &#123;<span class="string">'content-type'</span>: <span class="string">'application/json'</span>&#125;</div><div class="line"> </div><div class="line">ret = requests.post(url, data=json.dumps(payload), headers=headers)</div><div class="line"> </div><div class="line">print(ret.text)</div><div class="line">print(ret.cookies)</div></pre></td></tr></table></figure>
<p>其他请求</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">requests.get(url, params=<span class="keyword">None</span>, **kwargs)</div><div class="line">requests.post(url, data=<span class="keyword">None</span>, json=<span class="keyword">None</span>, **kwargs)</div><div class="line">requests.put(url, data=<span class="keyword">None</span>, **kwargs)</div><div class="line">requests.head(url, **kwargs)</div><div class="line">requests.delete(url, **kwargs)</div><div class="line">requests.patch(url, data=<span class="keyword">None</span>, **kwargs)</div><div class="line">requests.options(url, **kwargs)</div><div class="line"> </div><div class="line"><span class="comment"># 以上方法均是在此方法的基础上构建</span></div><div class="line">requests.request(method, url, **kwargs)</div></pre></td></tr></table></figure>
<p>更多requests模块相关的文档见：<a href="http://cn.python-requests.org/zh_CN/latest/" target="_blank" rel="external">http://cn.python-requests.org/zh_CN/latest/</a></p>
<h5 id="3、Http请求和XML实例"><a href="#3、Http请求和XML实例" class="headerlink" title="3、Http请求和XML实例"></a>3、Http请求和XML实例</h5><p>实例：检测QQ账号是否在线</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment"># 使用内置模块urllib发送HTTP请求，或者XML格式内容</span></div><div class="line"><span class="string">"""</span></div><div class="line">f = urllib.request.urlopen('http://www.webxml.com.cn//webservices/qqOnlineWebService.asmx/qqCheckOnline?qqCode=424662508')</div><div class="line">result = f.read().decode('utf-8')</div><div class="line">"""</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 使用第三方模块requests发送HTTP请求，或者XML格式内容</span></div><div class="line">r = requests.get(<span class="string">'http://www.webxml.com.cn//webservices/qqOnlineWebService.asmx/qqCheckOnline?qqCode=424662508'</span>)</div><div class="line">result = r.text</div><div class="line"></div><div class="line"><span class="comment"># 解析XML格式内容</span></div><div class="line">node = ET.XML(result)</div><div class="line"></div><div class="line"><span class="comment"># 获取内容</span></div><div class="line"><span class="keyword">if</span> node.text == <span class="string">"Y"</span>:</div><div class="line">    print(<span class="string">"在线"</span>)</div><div class="line"><span class="keyword">else</span>:</div><div class="line">    print(<span class="string">"离线"</span>)</div></pre></td></tr></table></figure>
<p>实例：查看火车停靠信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> urllib</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</div><div class="line"></div><div class="line"><span class="comment"># 使用内置模块urllib发送HTTP请求，或者XML格式内容</span></div><div class="line"><span class="string">"""</span></div><div class="line">f = urllib.request.urlopen('http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=G666&amp;UserID=')</div><div class="line">result = f.read().decode('utf-8')</div><div class="line">"""</div><div class="line"></div><div class="line"><span class="comment"># 使用第三方模块requests发送HTTP请求，或者XML格式内容</span></div><div class="line">r = requests.get(<span class="string">'http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=G666&amp;UserID='</span>)</div><div class="line">result = r.text</div><div class="line"></div><div class="line"><span class="comment"># 解析XML格式内容</span></div><div class="line">root = ET.XML(result)</div><div class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'TrainDetailInfo'</span>):</div><div class="line">    print(node.find(<span class="string">'TrainStation'</span>).text,node.find(<span class="string">'StartTime'</span>).text,node.tag,node.attrib)</div></pre></td></tr></table></figure>
<p>注：更多接口<a href="http://www.cnblogs.com/wupeiqi/archive/2012/11/18/2776014.html" target="_blank" rel="external">猛击这里</a></p>
<h4 id="十、logging"><a href="#十、logging" class="headerlink" title="十、logging"></a>十、logging</h4><p>用于便捷记录日志且<strong>线程安全</strong>的模块</p>
<h5 id="1、单文件日志"><a href="#1、单文件日志" class="headerlink" title="1、单文件日志"></a>1、单文件日志</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> logging</div><div class="line">  </div><div class="line">logging.basicConfig(filename=<span class="string">'log.log'</span>,</div><div class="line">                    format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</div><div class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,</div><div class="line">                    level=<span class="number">10</span>)</div><div class="line">  </div><div class="line">logging.debug(<span class="string">'debug'</span>)</div><div class="line">logging.info(<span class="string">'info'</span>)</div><div class="line">logging.warning(<span class="string">'warning'</span>)</div><div class="line">logging.error(<span class="string">'error'</span>)</div><div class="line">logging.critical(<span class="string">'critical'</span>)</div><div class="line">logging.log(<span class="number">10</span>,<span class="string">'log'</span>)</div></pre></td></tr></table></figure>
<p>日志等级：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">CRITICAL = 50</div><div class="line">FATAL = CRITICAL</div><div class="line">ERROR = 40</div><div class="line">WARNING = 30</div><div class="line">WARN = WARNING</div><div class="line">INFO = 20</div><div class="line">DEBUG = 10</div><div class="line">NOTSET = 0</div></pre></td></tr></table></figure>
<blockquote>
<p>注：只有【当前写等级】大于【日志等级】时，日志文件才被记录。</p>
</blockquote>
<p>日志记录格式：</p>
<p><img src="https://i.loli.net/2017/07/14/596817a40dc51.png"></p>
<h5 id="2、多文件日志"><a href="#2、多文件日志" class="headerlink" title="2、多文件日志"></a>2、多文件日志</h5><p>对于上述记录日志的功能，只能将日志记录在单文件中，如果想要设置多个日志文件，logging.basicConfig将无法完成，需要自定义文件和日志操作对象。</p>
<p>日志一</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义文件</span></div><div class="line">file_1_1 = logging.FileHandler(<span class="string">'l1_1.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line">fmt = logging.Formatter(fmt=<span class="string">"%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s"</span>)</div><div class="line">file_1_1.setFormatter(fmt)</div><div class="line"></div><div class="line">file_1_2 = logging.FileHandler(<span class="string">'l1_2.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</div><div class="line">fmt = logging.Formatter()</div><div class="line">file_1_2.setFormatter(fmt)</div><div class="line"></div><div class="line"><span class="comment"># 定义日志</span></div><div class="line">logger1 = logging.Logger(<span class="string">'s1'</span>, level=logging.ERROR)</div><div class="line">logger1.addHandler(file_1_1)</div><div class="line">logger1.addHandler(file_1_2)</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># 写日志</span></div><div class="line">logger1.critical(<span class="string">'1111'</span>)</div></pre></td></tr></table></figure>
<p>日志（二）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 定义文件</span></div><div class="line">file_2_1 = logging.FileHandler(<span class="string">'l2_1.log'</span>, <span class="string">'a'</span>)</div><div class="line">fmt = logging.Formatter()</div><div class="line">file_2_1.setFormatter(fmt)</div><div class="line"></div><div class="line"><span class="comment"># 定义日志</span></div><div class="line">logger2 = logging.Logger(<span class="string">'s2'</span>, level=logging.INFO)</div><div class="line">logger2.addHandler(file_2_1)</div></pre></td></tr></table></figure>
<p>如上述创建的两个日志对象</p>
<ul>
<li>当使用【logger1】写日志时，会将相应的内容写入 l1_1.log 和 l1_2.log 文件中</li>
<li>当使用【logger2】写日志时，会将相应的内容写入 l2_1.log 文件中</li>
</ul>
<h4 id="十一、系统命令"><a href="#十一、系统命令" class="headerlink" title="十一、系统命令"></a>十一、系统命令</h4><ul>
<li>os.system</li>
<li>os.spawn*</li>
<li>os.popen*          –废弃</li>
<li>popen2.*           –废弃</li>
<li>commands.*      –废弃，3.x中被移除</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> commands</div><div class="line"></div><div class="line">result = commands.getoutput(<span class="string">'cmd'</span>)</div><div class="line">result = commands.getstatus(<span class="string">'cmd'</span>)</div><div class="line">result = commands.getstatusoutput(<span class="string">'cmd'</span>)</div></pre></td></tr></table></figure>
<ul>
<li>subprocess 模块:以上执行shell命令的相关的模块和函数的功能均在 subprocess 模块中实现，并提供了更丰富的功能。</li>
</ul>
<h5 id="call"><a href="#call" class="headerlink" title="call"></a>call</h5><p>执行命令，返回状态码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ret = subprocess.call([<span class="string">"ls"</span>, <span class="string">"-l"</span>], shell=<span class="keyword">False</span>)</div><div class="line">ret = subprocess.call(<span class="string">"ls -l"</span>, shell=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h5 id="check-call"><a href="#check-call" class="headerlink" title="check_call"></a>check_call</h5><p>执行命令，如果执行状态码是 0 ，则返回0，否则抛异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">subprocess.check_call([<span class="string">"ls"</span>, <span class="string">"-l"</span>])</div><div class="line">subprocess.check_call(<span class="string">"exit 1"</span>, shell=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h5 id="check-output"><a href="#check-output" class="headerlink" title="check_output"></a>check_output</h5><p>执行命令，如果状态码是 0 ，则返回执行结果，否则抛异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">subprocess.check_output([<span class="string">"echo"</span>, <span class="string">"Hello World!"</span>])</div><div class="line">subprocess.check_output(<span class="string">"exit 1"</span>, shell=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<h5 id="subprocess-Popen-…"><a href="#subprocess-Popen-…" class="headerlink" title="subprocess.Popen(…)"></a>subprocess.Popen(…)</h5><p>用于执行复杂的系统命令</p>
<p>参数：</p>
<ul>
<li>args：shell命令，可以是字符串或者序列类型（如：list，元组）</li>
<li>bufsize：指定缓冲。0 无缓冲,1 行缓冲,其他 缓冲区大小,负值 系统缓冲</li>
<li>stdin, stdout, stderr：分别表示程序的标准输入、输出、错误句柄</li>
<li>preexec_fn：只在Unix平台下有效，用于指定一个可执行对象（callable object），它将在子进程运行之前被调用</li>
<li>close_sfs：在windows平台下，如果close_fds被设置为True，则新创建的子进程将不会继承父进程的输入、输出、错误管道。<br>所以不能将close_fds设置为True同时重定向子进程的标准输入、输出与错误(stdin, stdout, stderr)。</li>
<li>shell：同上</li>
<li>cwd：用于设置子进程的当前目录</li>
<li>env：用于指定子进程的环境变量。如果env = None，子进程的环境变量将从父进程中继承。</li>
<li>universal_newlines：不同系统的换行符不同，True -&gt; 同意使用 \n</li>
<li>startupinfo与createionflags只在windows下有效<br>将被传递给底层的CreateProcess()函数，用于设置子进程的一些属性，如：主窗口的外观，进程的优先级等等 </li>
</ul>
<p>执行普通命令</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> subprocess</div><div class="line">ret1 = subprocess.Popen([<span class="string">"mkdir"</span>,<span class="string">"t1"</span>])</div><div class="line">ret2 = subprocess.Popen(<span class="string">"mkdir t2"</span>, shell=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<p>终端输入的命令分为两种：</p>
<ul>
<li>输入即可得到输出，如：ifconfig</li>
<li>输入进行某环境，依赖再输入，如：python</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> subprocess</div><div class="line"></div><div class="line">obj = subprocess.Popen(<span class="string">"mkdir t3"</span>, shell=<span class="keyword">True</span>, cwd=<span class="string">'/home/dev'</span>,)</div><div class="line"><span class="comment">#######################</span></div><div class="line">obj = subprocess.Popen([<span class="string">"python"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="keyword">True</span>)</div><div class="line">obj.stdin.write(<span class="string">"print(1)\n"</span>)</div><div class="line">obj.stdin.write(<span class="string">"print(2)"</span>)</div><div class="line">obj.stdin.close()</div><div class="line"></div><div class="line">cmd_out = obj.stdout.read()</div><div class="line">obj.stdout.close()</div><div class="line">cmd_error = obj.stderr.read()</div><div class="line">obj.stderr.close()</div><div class="line"></div><div class="line">print(cmd_out)</div><div class="line">print(cmd_error)</div><div class="line"><span class="comment">###################</span></div><div class="line">obj = subprocess.Popen([<span class="string">"python"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="keyword">True</span>)</div><div class="line">obj.stdin.write(<span class="string">"print(1)\n"</span>)</div><div class="line">obj.stdin.write(<span class="string">"print(2)"</span>)</div><div class="line"></div><div class="line">out_error_list = obj.communicate()</div><div class="line">print(out_error_list)</div><div class="line"><span class="comment">###############</span></div><div class="line">obj = subprocess.Popen([<span class="string">"python"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="keyword">True</span>)</div><div class="line">out_error_list = obj.communicate(<span class="string">'print("hello")'</span>)</div><div class="line">print(out_error_list)</div></pre></td></tr></table></figure>
<h4 id="十二、shutil"><a href="#十二、shutil" class="headerlink" title="十二、shutil"></a>十二、shutil</h4><p>高级的 文件、文件夹、压缩包 处理模块</p>
<h5 id="shutil-copyfileobj-fsrc-fdst-length"><a href="#shutil-copyfileobj-fsrc-fdst-length" class="headerlink" title="shutil.copyfileobj(fsrc, fdst[, length])"></a>shutil.copyfileobj(fsrc, fdst[, length])</h5><p>将文件内容拷贝到另一个文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> shutil</div><div class="line">shutil.copyfileobj(open(<span class="string">'old.xml'</span>,<span class="string">'r'</span>), open(<span class="string">'new.xml'</span>, <span class="string">'w'</span>))</div></pre></td></tr></table></figure>
<h5 id="shutil-copyfile-src-dst"><a href="#shutil-copyfile-src-dst" class="headerlink" title="shutil.copyfile(src, dst)"></a>shutil.copyfile(src, dst)</h5><p>拷贝文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.copyfile(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-copymode-src-dst"><a href="#shutil-copymode-src-dst" class="headerlink" title="shutil.copymode(src, dst)"></a>shutil.copymode(src, dst)</h5><p>仅拷贝权限。内容、组、用户均不变</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.copymode(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-copystat-src-dst"><a href="#shutil-copystat-src-dst" class="headerlink" title="shutil.copystat(src, dst)"></a>shutil.copystat(src, dst)</h5><p>仅拷贝状态的信息，包括：mode bits, atime, mtime, flags</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.copystat(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-copy-src-dst"><a href="#shutil-copy-src-dst" class="headerlink" title="shutil.copy(src, dst)"></a>shutil.copy(src, dst)</h5><p>拷贝文件和权限</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> shutil</div><div class="line">shutil.copy(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-copy2-src-dst"><a href="#shutil-copy2-src-dst" class="headerlink" title="shutil.copy2(src, dst)"></a>shutil.copy2(src, dst)</h5><p>拷贝文件和状态信息</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.copy2(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-ignore-patterns-patterns"><a href="#shutil-ignore-patterns-patterns" class="headerlink" title="shutil.ignore_patterns(*patterns)"></a>shutil.ignore_patterns(*patterns)</h5><h5 id="shutil-copytree-src-dst-symlinks-False-ignore-None"><a href="#shutil-copytree-src-dst-symlinks-False-ignore-None" class="headerlink" title="shutil.copytree(src, dst, symlinks=False, ignore=None)"></a>shutil.copytree(src, dst, symlinks=False, ignore=None)</h5><p>递归的去拷贝文件夹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">shutil.copytree(<span class="string">'folder1'</span>, <span class="string">'folder2'</span>, ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))</div><div class="line"><span class="comment"># 实例</span></div><div class="line">shutil.copytree(<span class="string">'f1'</span>, <span class="string">'f2'</span>, symlinks=<span class="keyword">True</span>, ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))</div></pre></td></tr></table></figure>
<h5 id="shutil-rmtree-path-ignore-errors-onerror"><a href="#shutil-rmtree-path-ignore-errors-onerror" class="headerlink" title="shutil.rmtree(path[, ignore_errors[, onerror]])"></a>shutil.rmtree(path[, ignore_errors[, onerror]])</h5><p>递归的去删除文件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.rmtree(<span class="string">'folder1'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-move-src-dst"><a href="#shutil-move-src-dst" class="headerlink" title="shutil.move(src, dst)"></a>shutil.move(src, dst)</h5><p>递归的去移动文件，它类似mv命令，其实就是重命名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">shutil.move(<span class="string">'folder1'</span>, <span class="string">'folder3'</span>)</div></pre></td></tr></table></figure>
<h5 id="shutil-make-archive-base-name-format-…"><a href="#shutil-make-archive-base-name-format-…" class="headerlink" title="shutil.make_archive(base_name, format,…)"></a>shutil.make_archive(base_name, format,…)</h5><p>创建压缩包并返回文件路径，例如：zip、tar</p>
<p>创建压缩包并返回文件路径，例如：zip、tar</p>
<ul>
<li>base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，<br>如：www                        =&gt;保存至当前路径<br>如：/Users/wupeiqi/www =&gt;保存至/Users/wupeiqi/</li>
<li>format：    压缩包种类，“zip”, “tar”, “bztar”，“gztar”</li>
<li>root_dir：    要压缩的文件夹路径（默认当前目录）</li>
<li>owner：    用户，默认当前用户</li>
<li>group：    组，默认当前组</li>
<li>logger：    用于记录日志，通常是logging.Logger对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#将 /Users/wupeiqi/Downloads/test 下的文件打包放置当前程序目录</span></div><div class="line"><span class="keyword">import</span> shutil</div><div class="line">ret = shutil.make_archive(<span class="string">"wwwwwwwwww"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/Users/wupeiqi/Downloads/test'</span>)</div><div class="line">  </div><div class="line"><span class="comment">#将 /Users/wupeiqi/Downloads/test 下的文件打包放置 /Users/wupeiqi/目录</span></div><div class="line">ret = shutil.make_archive(<span class="string">"/Users/wupeiqi/wwwwwwwwww"</span>, <span class="string">'gztar'</span>, root_dir=<span class="string">'/Users/wupeiqi/Downloads/test'</span>)</div></pre></td></tr></table></figure>
<p>shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的，详细：</p>
<p>zipfile解压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> zipfile</div><div class="line"></div><div class="line"><span class="comment"># 压缩</span></div><div class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'w'</span>)</div><div class="line">z.write(<span class="string">'a.log'</span>)</div><div class="line">z.write(<span class="string">'data.data'</span>)</div><div class="line">z.close()</div><div class="line"></div><div class="line"><span class="comment"># 解压</span></div><div class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'r'</span>)</div><div class="line">z.extractall()</div><div class="line">z.close()</div></pre></td></tr></table></figure>
<p>tarfile解压缩</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> tarfile</div><div class="line"></div><div class="line"><span class="comment"># 压缩</span></div><div class="line">tar = tarfile.open(<span class="string">'your.tar'</span>,<span class="string">'w'</span>)</div><div class="line">tar.add(<span class="string">'/Users/wupeiqi/PycharmProjects/bbs2.log'</span>, arcname=<span class="string">'bbs2.log'</span>)</div><div class="line">tar.add(<span class="string">'/Users/wupeiqi/PycharmProjects/cmdb.log'</span>, arcname=<span class="string">'cmdb.log'</span>)</div><div class="line">tar.close()</div><div class="line"></div><div class="line"><span class="comment"># 解压</span></div><div class="line">tar = tarfile.open(<span class="string">'your.tar'</span>,<span class="string">'r'</span>)</div><div class="line">tar.extractall()  <span class="comment"># 可设置解压地址</span></div><div class="line">tar.close()</div></pre></td></tr></table></figure>
<h4 id="十三、paramiko"><a href="#十三、paramiko" class="headerlink" title="十三、paramiko"></a>十三、paramiko</h4><p>paramiko是一个用于做远程控制的模块，使用该模块可以对远程服务器进行命令或文件操作，值得一说的是，fabric和ansible内部的远程管理就是使用的paramiko来现实。</p>
<h5 id="1、下载安装"><a href="#1、下载安装" class="headerlink" title="1、下载安装"></a>1、下载安装</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pycrypto，由于 paramiko 模块内部依赖pycrypto，所以先下载安装pycrypto</div><div class="line">pip3 install pycrypto</div><div class="line">pip3 install paramiko</div></pre></td></tr></table></figure>
<h5 id="2、模块使用"><a href="#2、模块使用" class="headerlink" title="2、模块使用"></a>2、模块使用</h5><p>执行命令 - 用户名+密码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment">#coding:utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">ssh = paramiko.SSHClient()</div><div class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</div><div class="line">ssh.connect(<span class="string">'192.168.1.108'</span>, <span class="number">22</span>, <span class="string">'alex'</span>, <span class="string">'123'</span>)</div><div class="line">stdin, stdout, stderr = ssh.exec_command(<span class="string">'df'</span>)</div><div class="line"><span class="keyword">print</span> stdout.read()</div><div class="line">ssh.close();</div></pre></td></tr></table></figure>
<p>执行命令 - 密钥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">private_key_path = <span class="string">'/home/auto/.ssh/id_rsa'</span></div><div class="line">key = paramiko.RSAKey.from_private_key_file(private_key_path)</div><div class="line"></div><div class="line">ssh = paramiko.SSHClient()</div><div class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</div><div class="line">ssh.connect(<span class="string">'主机名 '</span>, 端口, <span class="string">'用户名'</span>, key)</div><div class="line"></div><div class="line">stdin, stdout, stderr = ssh.exec_command(<span class="string">'df'</span>)</div><div class="line"><span class="keyword">print</span> stdout.read()</div><div class="line">ssh.close()</div></pre></td></tr></table></figure>
<p>上传或下载文件 - 用户名+密码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> os,sys</div><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">t = paramiko.Transport((<span class="string">'182.92.219.86'</span>,<span class="number">22</span>))</div><div class="line">t.connect(username=<span class="string">'wupeiqi'</span>,password=<span class="string">'123'</span>)</div><div class="line">sftp = paramiko.SFTPClient.from_transport(t)</div><div class="line">sftp.put(<span class="string">'/tmp/test.py'</span>,<span class="string">'/tmp/test.py'</span>) </div><div class="line">t.close()</div><div class="line"></div><div class="line"><span class="keyword">import</span> os,sys</div><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">t = paramiko.Transport((<span class="string">'182.92.219.86'</span>,<span class="number">22</span>))</div><div class="line">t.connect(username=<span class="string">'wupeiqi'</span>,password=<span class="string">'123'</span>)</div><div class="line">sftp = paramiko.SFTPClient.from_transport(t)</div><div class="line">sftp.get(<span class="string">'/tmp/test.py'</span>,<span class="string">'/tmp/test2.py'</span>)</div><div class="line">t.close()</div></pre></td></tr></table></figure>
<p>上传或下载文件 - 密钥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">pravie_key_path = <span class="string">'/home/auto/.ssh/id_rsa'</span></div><div class="line">key = paramiko.RSAKey.from_private_key_file(pravie_key_path)</div><div class="line"></div><div class="line">t = paramiko.Transport((<span class="string">'182.92.219.86'</span>,<span class="number">22</span>))</div><div class="line">t.connect(username=<span class="string">'wupeiqi'</span>,pkey=key)</div><div class="line"></div><div class="line">sftp = paramiko.SFTPClient.from_transport(t)</div><div class="line">sftp.put(<span class="string">'/tmp/test3.py'</span>,<span class="string">'/tmp/test3.py'</span>) </div><div class="line"></div><div class="line">t.close()</div><div class="line"></div><div class="line"><span class="keyword">import</span> paramiko</div><div class="line"></div><div class="line">pravie_key_path = <span class="string">'/home/auto/.ssh/id_rsa'</span></div><div class="line">key = paramiko.RSAKey.from_private_key_file(pravie_key_path)</div><div class="line"></div><div class="line">t = paramiko.Transport((<span class="string">'182.92.219.86'</span>,<span class="number">22</span>))</div><div class="line">t.connect(username=<span class="string">'wupeiqi'</span>,pkey=key)</div><div class="line"></div><div class="line">sftp = paramiko.SFTPClient.from_transport(t)</div><div class="line">sftp.get(<span class="string">'/tmp/test3.py'</span>,<span class="string">'/tmp/test4.py'</span>) </div><div class="line"></div><div class="line">t.close()</div></pre></td></tr></table></figure>
<h4 id="十四、time"><a href="#十四、time" class="headerlink" title="十四、time"></a>十四、time</h4><p>时间相关的操作，时间有三种表示方式：</p>
<ul>
<li>时间戳               1970年1月1日之后的秒，即：time.time()</li>
<li>格式化的字符串    2014-11-11 11:11，    即：time.strftime(‘%Y-%m-%d’)</li>
<li>结构化时间          元组包含了：年、日、星期等… time.struct_time    即：time.localtime()</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">print</span> time.time()</div><div class="line"><span class="keyword">print</span> time.mktime(time.localtime())</div><div class="line">   </div><div class="line"><span class="keyword">print</span> time.gmtime()    <span class="comment">#可加时间戳参数</span></div><div class="line"><span class="keyword">print</span> time.localtime() <span class="comment">#可加时间戳参数</span></div><div class="line"><span class="keyword">print</span> time.strptime(<span class="string">'2014-11-11'</span>, <span class="string">'%Y-%m-%d'</span>)</div><div class="line">   </div><div class="line"><span class="keyword">print</span> time.strftime(<span class="string">'%Y-%m-%d'</span>) <span class="comment">#默认当前时间</span></div><div class="line"><span class="keyword">print</span> time.strftime(<span class="string">'%Y-%m-%d'</span>,time.localtime()) <span class="comment">#默认当前时间</span></div><div class="line"><span class="keyword">print</span> time.asctime()</div><div class="line"><span class="keyword">print</span> time.asctime(time.localtime())</div><div class="line"><span class="keyword">print</span> time.ctime(time.time())</div><div class="line">   </div><div class="line"><span class="keyword">import</span> datetime</div><div class="line"><span class="string">'''</span></div><div class="line">datetime.date：表示日期的类。常用的属性有year, month, day</div><div class="line">datetime.time：表示时间的类。常用的属性有hour, minute, second, microsecond</div><div class="line">datetime.datetime：表示日期时间</div><div class="line">datetime.timedelta：表示时间间隔，即两个时间点之间的长度</div><div class="line">timedelta([days[, seconds[, microseconds[, milliseconds[, minutes[, hours[, weeks]]]]]]])</div><div class="line">strftime("%Y-%m-%d")</div><div class="line">'''</div><div class="line"><span class="keyword">import</span> datetime</div><div class="line"><span class="keyword">print</span> datetime.datetime.now()</div><div class="line"><span class="keyword">print</span> datetime.datetime.now() - datetime.timedelta(days=<span class="number">5</span>)</div></pre></td></tr></table></figure>
<p>格式化占位符</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">%Y  Year with century as a decimal number.</div><div class="line">   %m  Month as a decimal number [01,12].</div><div class="line">   %d  Day of the month as a decimal number [01,31].</div><div class="line">   %H  Hour (24-hour clock) as a decimal number [00,23].</div><div class="line">   %M  Minute as a decimal number [00,59].</div><div class="line">   %S  Second as a decimal number [00,61].</div><div class="line">   %z  Time zone offset from UTC.</div><div class="line">   %a  Locale's abbreviated weekday name.</div><div class="line">   %A  Locale's full weekday name.</div><div class="line">   %b  Locale's abbreviated month name.</div><div class="line">   %B  Locale's full month name.</div><div class="line">   %c  Locale's appropriate date and time representation.</div><div class="line">   %I  Hour (12-hour clock) as a decimal number [01,12].</div><div class="line">   %p  Locale's equivalent of either AM or PM.</div></pre></td></tr></table></figure>
<h3 id="练习题："><a href="#练习题：" class="headerlink" title="练习题："></a>练习题：</h3><p>1、通过HTTP请求和XML实现获取电视节目</p>
<p>​     API：<a href="http://www.webxml.com.cn/webservices/ChinaTVprogramWebService.asmx" target="_blank" rel="external">http://www.webxml.com.cn/webservices/ChinaTVprogramWebService.asmx</a>  </p>
<p>2、通过HTTP请求和JSON实现获取天气状况</p>
<p>​     API：<a href="http://wthrcdn.etouch.cn/weather_mini?city=北京" target="_blank" rel="external">http://wthrcdn.etouch.cn/weather_mini?city=北京</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://7u2o1q.com1.z0.glb.clouddn.com/webchat-reward.jpg" alt="Yaro WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://7u2o1q.com1.z0.glb.clouddn.com/alipay-reward.jpg" alt="Yaro Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/07/15/第4篇-Py基础-杂货铺/" rel="next" title="第4篇-Py基础-杂货铺">
                <i class="fa fa-chevron-left"></i> 第4篇-Py基础-杂货铺
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/07/15/第6篇-Py面向对象-初级篇/" rel="prev" title="第6篇-Py面向对象-初级篇">
                第6篇-Py面向对象-初级篇 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/07/15/第5篇-Py模块/"
           data-title="第5篇-Py模块" data-url="http://yoursite.com/2017/07/15/第5篇-Py模块/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7u2o1q.com1.z0.glb.clouddn.com/Yaro%E5%A4%B4%E5%83%8F1.png"
               alt="Yaro" />
          <p class="site-author-name" itemprop="name">Yaro</p>
          <p class="site-description motion-element" itemprop="description">生活=不断尝试,不断犯错</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">30</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/yaro97" target="_blank" title="GitHub">
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/wyzh97" target="_blank" title="Twitter">
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/mryaro" target="_blank" title="知乎">
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#自定义模块"><span class="nav-number">1.</span> <span class="nav-text">自定义模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、定义模块"><span class="nav-number">1.1.</span> <span class="nav-text">1、定义模块</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、导入模块"><span class="nav-number">1.2.</span> <span class="nav-text">2、导入模块</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内置模块"><span class="nav-number">2.</span> <span class="nav-text">内置模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一、sys"><span class="nav-number">2.1.</span> <span class="nav-text">一、sys</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二、os"><span class="nav-number">2.2.</span> <span class="nav-text">二、os</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三、hashlib"><span class="nav-number">2.3.</span> <span class="nav-text">三、hashlib</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#四、random"><span class="nav-number">2.4.</span> <span class="nav-text">四、random</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#五、re"><span class="nav-number">2.5.</span> <span class="nav-text">五、re</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#match"><span class="nav-number">2.5.1.</span> <span class="nav-text">match</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#search"><span class="nav-number">2.5.2.</span> <span class="nav-text">search</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#findall"><span class="nav-number">2.5.3.</span> <span class="nav-text">findall</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sub"><span class="nav-number">2.5.4.</span> <span class="nav-text">sub</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#split"><span class="nav-number">2.5.5.</span> <span class="nav-text">split</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#六、序列化"><span class="nav-number">2.6.</span> <span class="nav-text">六、序列化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#七、configparser"><span class="nav-number">2.7.</span> <span class="nav-text">七、configparser</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#八、XML"><span class="nav-number">2.8.</span> <span class="nav-text">八、XML</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、解析XML"><span class="nav-number">2.8.1.</span> <span class="nav-text">1、解析XML</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、操作XML"><span class="nav-number">2.8.2.</span> <span class="nav-text">2、操作XML</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、创建XML文档"><span class="nav-number">2.8.3.</span> <span class="nav-text">3、创建XML文档</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4、命名空间"><span class="nav-number">2.8.4.</span> <span class="nav-text">4、命名空间</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#九、requests"><span class="nav-number">2.9.</span> <span class="nav-text">九、requests</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、安装模块"><span class="nav-number">2.9.1.</span> <span class="nav-text">1、安装模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、使用模块"><span class="nav-number">2.9.2.</span> <span class="nav-text">2、使用模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、Http请求和XML实例"><span class="nav-number">2.9.3.</span> <span class="nav-text">3、Http请求和XML实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十、logging"><span class="nav-number">2.10.</span> <span class="nav-text">十、logging</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、单文件日志"><span class="nav-number">2.10.1.</span> <span class="nav-text">1、单文件日志</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、多文件日志"><span class="nav-number">2.10.2.</span> <span class="nav-text">2、多文件日志</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十一、系统命令"><span class="nav-number">2.11.</span> <span class="nav-text">十一、系统命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#call"><span class="nav-number">2.11.1.</span> <span class="nav-text">call</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#check-call"><span class="nav-number">2.11.2.</span> <span class="nav-text">check_call</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#check-output"><span class="nav-number">2.11.3.</span> <span class="nav-text">check_output</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#subprocess-Popen-…"><span class="nav-number">2.11.4.</span> <span class="nav-text">subprocess.Popen(…)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十二、shutil"><span class="nav-number">2.12.</span> <span class="nav-text">十二、shutil</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copyfileobj-fsrc-fdst-length"><span class="nav-number">2.12.1.</span> <span class="nav-text">shutil.copyfileobj(fsrc, fdst[, length])</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copyfile-src-dst"><span class="nav-number">2.12.2.</span> <span class="nav-text">shutil.copyfile(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copymode-src-dst"><span class="nav-number">2.12.3.</span> <span class="nav-text">shutil.copymode(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copystat-src-dst"><span class="nav-number">2.12.4.</span> <span class="nav-text">shutil.copystat(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copy-src-dst"><span class="nav-number">2.12.5.</span> <span class="nav-text">shutil.copy(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copy2-src-dst"><span class="nav-number">2.12.6.</span> <span class="nav-text">shutil.copy2(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-ignore-patterns-patterns"><span class="nav-number">2.12.7.</span> <span class="nav-text">shutil.ignore_patterns(*patterns)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-copytree-src-dst-symlinks-False-ignore-None"><span class="nav-number">2.12.8.</span> <span class="nav-text">shutil.copytree(src, dst, symlinks=False, ignore=None)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-rmtree-path-ignore-errors-onerror"><span class="nav-number">2.12.9.</span> <span class="nav-text">shutil.rmtree(path[, ignore_errors[, onerror]])</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-move-src-dst"><span class="nav-number">2.12.10.</span> <span class="nav-text">shutil.move(src, dst)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#shutil-make-archive-base-name-format-…"><span class="nav-number">2.12.11.</span> <span class="nav-text">shutil.make_archive(base_name, format,…)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十三、paramiko"><span class="nav-number">2.13.</span> <span class="nav-text">十三、paramiko</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、下载安装"><span class="nav-number">2.13.1.</span> <span class="nav-text">1、下载安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、模块使用"><span class="nav-number">2.13.2.</span> <span class="nav-text">2、模块使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#十四、time"><span class="nav-number">2.14.</span> <span class="nav-text">十四、time</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#练习题："><span class="nav-number">3.</span> <span class="nav-text">练习题：</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yaro</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"yaro97githubio"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
